define ("local_uitest/main",["jquery","theme_boost/tooltip"],function(a){var b={errors:[],warnings:[]},c={parseRgb:function parseRgb(a){var b,c,d,e,f;if(c=a.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){d=c.slice(1,4);for(b=e=0;2>=e;b=++e){d[b]=+d[b]}d[3]=1}else if(c=a.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/)){d=c.slice(1,5);for(b=f=0;3>=f;b=++f){d[b]=+d[b]}}return d},contrastRatio:function contrastRatio(a,b){var d=c.relativeLuminance(c.parseRgb(a)),e=c.relativeLuminance(c.parseRgb(b));return(Math.max(d,e)+.05)/(Math.min(d,e)+.05)},relativeLuminance:function relativeLuminance(a){for(var b=[],c=0,d;3>c;c++){d=a[c]/255;b.push(.03928>d?d/12.92:Math.pow((d+.055)/1.055,2.4))}return .2126*b[0]+.7152*b[1]+.0722*b[2]},getBackground:function getBackground(a){var b=getComputedStyle(a),d=b.backgroundColor,e=b.backgroundImage;if("rgba(0, 0, 0, 0)"!==d&&"transparent"!==d&&"none"===e){return d}else if("none"!==e){return"image"}if("HTML"===a.tagName){return"rgb(255, 255, 255)"}else{return c.getBackground(a.parentNode)}},isVisible:function isVisible(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},check:function check(){for(var a=document.getElementById("check-wcag").querySelectorAll("*"),d=0;d<a.length;d++){(function(d){var e=a[d],f=getComputedStyle(e),g=f.color,h=f.fill,i=e.tagName,j=c.getBackground(e),k=[].reduce.call(e.childNodes,function(c,a){return c+(3===a.nodeType?a.textContent:"")},""),l=k.trim(),m,n,o;if("svg"===i){var p=Math.round(100*c.contrastRatio(h,j))/100,q=p+":1";if(3>p){o="true";n="svg fill";m="fail"}}else if(l.length){if("image"===j){m="Needs manual review";n="N/A";o=!0}else{var p=Math.round(100*c.contrastRatio(g,j))/100,q=p+":1",r=parseInt(f.fontSize),s=f.fontWeight;if(18<=r||14<=r&&700<=s){n="large scale text";if(3>p){m="fail";o=!0}else{m="pass";o=!1}}else{n="normal body text";if(4.5>p){m="fail";o=!0}else{m="pass";o=!1}}}}if(o){var t={};t={name:e,ratio:q,detail:n,status:m};if("fail"===m){b.errors.push(t)}else if("Needs manual review"===m){b.warnings.push(t)}}})(d)}return b}};return{init:function init(){container=a("#check-wcag");container.on("click",function(){c.check();a("div.errors").html("");a("div.warnings").html("");a("div.errors").append("<h3 class=\"error-highlight\">Errors</h3>");a("div.warnings").append("<h3 class=\"warning-highlight\">Warnings</h3>");a("div.errors, div.warnings").append("<ol></ol>");for(var d=0,e;d<b.errors.length;d++){e=b.errors[d];a(e.name).addClass("error-highlight").append(" ("+d+")");a("div.errors ol").append("<li>"+e.name.innerHTML+": "+e.ratio+"</li>")}for(var d=0,e;d<b.warnings.length;d++){e=b.warnings[d];a(e.name).addClass("error-highlight").append(" ("+d+")");a("div.warnings ol").append("<li>"+e.name.innerHTML+": "+e.ratio+"</li>")}});a(".hastooltip").tooltip({boundary:"window"})}}});
//# sourceMappingURL=main.min.js.map
