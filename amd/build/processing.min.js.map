{"version":3,"sources":["../src/processing.js"],"names":["define","$","Templates","PubSub","registerEventListeners","root","addClass","render","done","html","subscribe","hasClass","append","delay","queue","dequeue","removeClass","find","remove","init"],"mappings":"AAyBAA,OAAM,2BACN,CACI,QADJ,CAEI,gBAFJ,CAGI,aAHJ,CADM,CAMN,SACIC,CADJ,CAEIC,CAFJ,CAGIC,CAHJ,CAIE,IAOMC,CAAAA,CAAsB,CAAG,SAASC,CAAT,CAAe,CAExCA,CAAI,CAACC,QAAL,CAAc,mBAAd,EAEAJ,CAAS,CAACK,MAAV,CAAiB,mCAAjB,CAAsD,EAAtD,EACCC,IADD,CAEI,SAASC,CAAT,CAAe,CACXN,CAAM,CAACO,SAAP,CAAiB,mBAAjB,CAAsC,UAAW,CAC7C,GAAI,CAACL,CAAI,CAACM,QAAL,CAAc,WAAd,CAAL,CAAiC,CAC7BN,CAAI,CAACO,MAAL,CAAYH,CAAZ,EAAkBH,QAAlB,CAA2B,WAA3B,EAAwCO,KAAxC,CAA8C,GAA9C,EAAmDC,KAAnD,CAAyD,UAAU,CAC/Db,CAAC,CAAC,IAAD,CAAD,CAAQK,QAAR,CAAiB,YAAjB,EAA+BS,OAA/B,EACH,CAFD,CAGH,CACJ,CAND,EAQAZ,CAAM,CAACO,SAAP,CAAiB,uBAAjB,CAA0C,UAAW,CACjD,GAAIL,CAAI,CAACM,QAAL,CAAc,WAAd,CAAJ,CAAgC,CAC5BN,CAAI,CAACW,WAAL,CAAiB,WAAjB,EAA8BA,WAA9B,CAA0C,YAA1C,EACAX,CAAI,CAACY,IAAL,CAAU,qBAAV,EAAiCC,MAAjC,EACH,CACJ,CALD,CAMH,CAjBL,CAmBH,CA9BH,CA0CE,MAAO,CACHC,IAAI,CANG,QAAPA,CAAAA,IAAO,CAASd,CAAT,CAAe,CACtBA,CAAI,CAAGJ,CAAC,CAACI,CAAD,CAAR,CACAD,CAAsB,CAACC,CAAD,CACzB,CAEM,CAIV,CAxDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Overlays a container with a loader that can appear and disappear\n *\n * @module     tool_wp/loader\n * @package    tool_wp\n * @copyright  2020 Moodle Pty Ltd <support@moodle.com>\n * @author     2020 Bas Brands\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @license    Moodle Workplace License, distribution is restricted, contact support@moodle.com\n */\ndefine(\n[\n    'jquery',\n    'core/templates',\n    'core/pubsub',\n],\nfunction(\n    $,\n    Templates,\n    PubSub\n) {\n\n    /**\n     * Event listener for showing the loader\n     *\n     * @param {object} root The root container for the loader.\n     */\n    var registerEventListeners = function(root) {\n\n        root.addClass('position-relative');\n\n        Templates.render('local_uitest/processing_indicator', {})\n        .done(\n            function(html) {\n                PubSub.subscribe('wp-loader-loading', function() {\n                    if (!root.hasClass('hasloader')) {\n                        root.append(html).addClass('hasloader').delay(150).queue(function(){\n                            $(this).addClass('showloader').dequeue();\n                        });\n                    }\n                });\n\n                PubSub.subscribe('wp-loader-stoploading', function() {\n                    if (root.hasClass('hasloader')) {\n                        root.removeClass('hasloader').removeClass('showloader');\n                        root.find('.tool-wp-processing').remove();\n                    }\n                });\n            }\n        );\n    };\n\n    /**\n     * Intialise the loader and wait for loading events.\n     *\n     * @param {object} root The root container for the loader.\n     */\n    var init = function(root) {\n        root = $(root);\n        registerEventListeners(root);\n    };\n\n    return {\n        init: init\n    };\n\n});"],"file":"processing.min.js"}